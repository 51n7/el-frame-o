<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>

    <link rel="stylesheet" type="text/css" href="./assets/style.css">
  </head>
  <body>
    <div class="titlebar"></div>
    
    <div class="list"></div>

    <button class="launch-btn" disabled>Launch</button>
    
    <script>
      if (window.isElectron) {
        
        var data = window.store.get('pages');
        // var form = document.querySelector('form');
        var launchBtn = document.querySelector('.launch-btn');

        // form.addEventListener("submit", function(e){
        //   e.preventDefault();

        //   var val = document.querySelector('[type="text"]').value;
        //   window.ipcRenderer.send('asynchronous-message', val);
        // });

        launchBtn.addEventListener("click", function(e){
          e.preventDefault();

          // var url = document.querySelector('[type="radio"]:checked ~ .details [type="text"]').value;

          // console.log( url );
          // window.ipcRenderer.send('asynchronous-message', url);
          console.log('click');
        });
        
        // console.log( data );

        for ( var key in data ) {
          if (data.hasOwnProperty(key)) {

            var item = document.createElement('label');
            item.classList.add('item');
            
            item.innerHTML = `
              <input type="radio" name="item" />
              <div class="title">
                <div class="checkbox"></div>
                <span>${ data[key].title }</span>
                <div class="btn-group">
                  <button><i class="far fa-edit"></i></button>
                </div>
              </div>
              <div class="details">
                <input type="text" value="${ data[key].url }" class="url" />
                <textarea class="css">${ data[key].css }</textarea>
              </div>
            `;
            
            document.querySelector('.list').appendChild(item);
          }
        }

        var radioboxes = document.querySelectorAll('[type="radio"]');

        for (var i = 0, len = radioboxes.length; i < len; i++) {
          radioboxes[i].addEventListener('change', function() {
            console.log('radio changed');

            launchBtn.disabled = false;
          });
        }
        
      }
    </script>
  </body>
</html>
